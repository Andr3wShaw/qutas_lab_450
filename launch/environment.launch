<?xml version='1.0'?>
<launch>
	<!-- Common Settings -->
	<arg name="frame_id" default="map" />
	<arg name="topic_grid" default="/grid" />
	<arg name="vicon_server" default="192.168.1.101"/>

	<arg name="vicon" default="true" />


	<!-- VRPN Clinet (VICON) -->
	<node pkg="vrpn_client_ros" type="vrpn_client_node" name="vicon" output="screen">
		<param name="server" value="$(arg vicon_server)" type="str" />
		<param name="port" value="3883" type="int" />

		<param name="update_frequency" value="100.0" type="double" />
		<param name="frame_id" value="$(arg frame_id)" type="str" />

		<param name="use_server_time" value="false" type="bool" />
		<param name="broadcast_tf" value="true" type="bool" />
		<param name="refresh_tracker_frequency" value="1.0" type="double" />
	</node>
	<!-- VICON Bridge -->
<<<<<<< HEAD
	<!-- Switched to VRPN Client!
	<include file="$(find vicon_bridge)/launch/vicon.launch">
		<arg name="server" value="$(arg frame_id)" />
	</include>
	-->
=======
	<group if="$(arg vicon)">
		<include file="$(find vicon_bridge)/launch/vicon.launch">
			<arg name="frame_id" value="$(arg frame_id)" />
		</include>
	</group>
>>>>>>> 93f1a27949c86e99fa51ee4cb928958969d7ee53


	<!-- Occupancy Grid -->
	<node pkg="qutas_lab_450" type="area_map_node" name="area_map" clear_params="true" output="screen">
		<param name="topic_map" value="$(arg topic_grid)" type="str" />
		<param name="frame_id" value="$(arg frame_id)" type="str" />

		<!-- Map Parameters /-->
		<rosparam command="load" file="$(find qutas_lab_450)/launch/map_layout.yaml"/>
	</node>


	<!-- Grid Visualization -->
	<node pkg="qutas_lab_450" type="area_viz_node" name="area_viz" clear_params="true" output="screen">
		<param name="topic_grid" value="$(arg topic_grid)" type="str" />
		<param name="topic_markers" value="markers" type="str" />
		<param name="marker/namespace" value="area_viz" type="str" />
		<param name="marker/height" value="2.0" type="double" />
		<param name="marker/color/alpha" value="1.0" type="double" />
		<param name="marker/color/red" value="0.5" type="double" />
		<param name="marker/color/green" value="0.5" type="double" />
		<param name="marker/color/blue" value="0.5" type="double" />
	</node>

</launch>
